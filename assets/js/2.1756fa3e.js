(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},85:function(t,e,n){"use strict";var i=n(64);n.n(i).a},86:function(t,e,n){"use strict";var i=n(65);n.n(i).a},87:function(t,e,n){"use strict";var i=n(66);n.n(i).a},88:function(t,e,n){"use strict";const i=n(89),s=n(91);t.exports=t=>{if("string"!=typeof t||0===t.length)return 0;t=i(t);let e=0;for(let n=0;n<t.length;n++){const i=t.codePointAt(n);i<=31||i>=127&&i<=159||(i>=768&&i<=879||(i>65535&&n++,e+=s(i)?2:1))}return e}},89:function(t,e,n){"use strict";const i=n(90);t.exports=t=>"string"==typeof t?t.replace(i(),""):t},90:function(t,e,n){"use strict";t.exports=()=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|");return new RegExp(t,"g")}},91:function(t,e,n){"use strict";t.exports=t=>!Number.isNaN(t)&&(t>=4352&&(t<=4447||9001===t||9002===t||11904<=t&&t<=12871&&12351!==t||12880<=t&&t<=19903||19968<=t&&t<=42182||43360<=t&&t<=43388||44032<=t&&t<=55203||63744<=t&&t<=64255||65040<=t&&t<=65049||65072<=t&&t<=65131||65281<=t&&t<=65376||65504<=t&&t<=65510||110592<=t&&t<=110593||127488<=t&&t<=127569||131072<=t&&t<=262141))},92:function(t,e,n){"use strict";var i=n(67);n.n(i).a},93:function(t,e,n){"use strict";var i=n(68);n.n(i).a},94:function(t,e,n){"use strict";var i=n(69);n.n(i).a},95:function(t,e,n){"use strict";var i=n(70);n.n(i).a},96:function(t,e,n){"use strict";var i=n(71);n.n(i).a},97:function(t,e,n){"use strict";n.r(e);const i=1,s="uzkk.gift-exchange.settings",a=()=>({name:"",code:"",auth:0});function o(){const t=a();if("undefined"==typeof localStorage)return t;const e=localStorage.getItem(s);if(!e)return t;try{const{version:n,settings:s}=JSON.parse(e);return n===i?{...t,...s}:t}catch(n){return console.warn("An error was encounted when parsing settings:\n"+e),t}}var l={props:{type:{type:String,default:"default"},title:String,disabled:Boolean}},r=(n(85),n(0)),c=Object(r.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{class:t.type,attrs:{title:t.disabled?"":t.title,disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[t._t("default")],2)}),[],!1,null,"4b6a57b1",null).exports,d={props:{value:Boolean,label:String,disabled:Boolean},model:{prop:"value",event:"update"},computed:{model:{get(){return this.value},set(t){this.$emit("update",t)}}}};n(86),Object(r.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:{disabled:t.disabled,checked:t.value}},[n("span",{staticClass:"checkbox"},[n("span",{staticClass:"inner"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"checkbox",disabled:t.disabled},domProps:{value:t.label,checked:Array.isArray(t.model)?t._i(t.model,t.label)>-1:t.model},on:{change:function(e){var n=t.model,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t.label,o=t._i(n,a);i.checked?o<0&&(t.model=n.concat([a])):o>-1&&(t.model=n.slice(0,o).concat(n.slice(o+1)))}else t.model=s}}})]),t._v(" "),t.$slots.default||t.label?n("span",{staticClass:"label"},[t._t("default"),t._v(" "),t.$slots.default?t._e():[t._v(t._s(t.label))]],2):t._e()])}),[],!1,null,"0e083b07",null).exports;function u(t,e,...n){const i=t[e];i instanceof Array?i.forEach(t=>t(...n)):i instanceof Function&&i(...n)}function p(t,e){e.forEach(e=>{t.dataset[e]=t.style[e]})}function h(t,e){e.forEach(e=>{t.style[e]=t.dataset[e]})}var f={functional:!0,props:{direction:{type:String,default:"vertical"},duration:{type:Number,default:.3},timingFunction:{type:String,default:"ease-in-out"}},render(t,{props:{direction:e,duration:n,timingFunction:i},listeners:s,children:a}){let o,l,r,c;"horizontal"===e?(o="width",c="scrollWidth",r="paddingLeft",l="paddingRight"):(o="height",c="scrollHeight",r="paddingTop",l="paddingBottom");const d=function(t,e,n){return t.filter(t=>!t.startsWith("transition")).map(t=>`${e}s ${n} ${function(t){return t.replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}(t)}`).join(",")}([o,l,r],n,i);return t("transition",{attrs:{css:!1},on:{beforeEnter(t){u(s,"before-enter",t),p(t,["transition",l,r]),t.style.transition=d,t.style[r]="0",t.style[l]="0",t.style[o]="0"},enter(t,e){t.dataset.overflow=t.style.overflow,h(t,[l,r]),t.style[o]=t[c]?t[c]+"px":"",t.style.overflow="hidden",setTimeout(e,1e3*n)},afterEnter(t){t.style[o]="",h(t,["overflow","transition"]),u(s,"after-enter",t)},beforeLeave(t){u(s,"before-leave",t),p(t,["overflow","transition",l,r]),t.style[o]=t[c]+"px",t.style.overflow="hidden"},leave(t,e){0!==t[c]&&(t.style.transition=d,t.style[o]="0",t.style[l]="0",t.style[r]="0"),setTimeout(e,1e3*n)},afterLeave(t){t.style[o]="",h(t,[l,r,"overflow","transition"]),u(s,"after-leave",t)}}},a)}},v=Object(r.a)(f,void 0,void 0,!1,null,null,null).exports;var m={props:{open:Boolean,initial:String},data:()=>({isOpen:!0}),components:{CollapseTransition:v},computed:{hasHeader(){return this.$slots.header||this.$slots["header-open"]&&this.isOpen||this.$slots["header-closed"]&&!this.isOpen}},created(){this.initial?(this.isOpen="open"===this.initial,this.onClickHeader=()=>this.isOpen=!this.isOpen):(this.isOpen=this.open,this.onClickHeader=()=>this.$emit("toggle",event),this.$watch("open",t=>{(function(t){return!0===t||!1===t})(t)&&t^this.isOpen&&(this.isOpen=t)}))}},g=(n(87),Object(r.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collapse-view"},[t.hasHeader?n("div",{staticClass:"collapse-header",on:{click:t.onClickHeader}},[t.isOpen?t._t("header-open",[t._t("header")]):t._t("header-closed",[t._t("header")])],2):t._e(),t._v(" "),n("collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"collapse-content"},[t._t("default")],2)])],1)}),[],!1,null,"7c5c4507",null).exports,n(88)),_=n.n(g),b={props:{prefixIcon:String,suffixIcon:String,placeholder:String,disabled:Boolean,inactive:Boolean,validate:Function,tabindex:Number,monospace:Boolean,value:[String,Number],type:{default:"text"},round:{default:!1},size:{default:1}},data:()=>({focused:!1,invalid:!1}),computed:{divStyle(){return{width:this.monospace&&this.inactive&&!this.focused?(_()(this.value||this.placeholder)/1.8+2.1)*this.size+"em":"100%"}},inputStyle(){return{fontSize:this.size+"rem",paddingLeft:Boolean(this.prefixIcon)+1+"em",paddingRight:Boolean(this.suffixIcon)+1+"em"}}},methods:{onInput(t){this.validate&&(this.invalid=!this.validate(t.target.value)),this.$emit("input",t.target.value)},onFocus(t){this.focused=!0,this.$emit("focus",t)},onBlur(t){this.focused=!1,this.$emit("blur",t)}}},y=(n(92),Object(r.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input",class:{focused:t.focused,disabled:t.disabled},style:t.divStyle},[t.prefixIcon?n("i",{staticClass:"prefix",class:"icon-"+t.prefixIcon}):t._e(),t._v(" "),n("input",{class:{round:t.round,invalid:t.invalid,inactive:t.inactive,monospace:t.monospace},style:t.inputStyle,attrs:{type:t.type,tabindex:t.tabindex,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.$emit("enter",e))}}}),t._v(" "),t.suffixIcon?n("i",{staticClass:"suffix",class:"icon-"+t.suffixIcon}):t._e()])}),[],!1,null,"0603412f",null).exports),$={props:{value:{},label:{},disabled:Boolean},model:{prop:"value",event:"input"},computed:{model:{get(){return this.value},set(t){this.$emit("input",t)}}}},x=(n(93),Object(r.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:{disabled:t.disabled,checked:t.label===t.model}},[n("span",{staticClass:"radio"},[n("span",{staticClass:"inner"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"radio",disabled:t.disabled},domProps:{value:t.label,checked:t._q(t.model,t.label)},on:{change:function(e){t.model=t.label}}})]),t._v(" "),t.$slots.default||t.label?n("span",{staticClass:"label"},[t._t("default",[t._v(t._s(t.label))])],2):t._e()])}),[],!1,null,"10444d54",null).exports,{components:{Button:c,Input:y},inject:["$app"],data:()=>({inputName:!1,loading:!1}),computed:{isInvalid(){return!/^[a-zA-Z0-9]{20}$/.test(this.$app.code)}},methods:{async login(){this.loading=!0;const t=await fetch(this.UZKK_GIFT_EXCHANGE_SERVER+this.$app.code+(this.inputName?"?name="+this.$app.name:"")),e=await t.json();this.loading=!1,200!==t.status?console.error(e.error):e.name?(this.inputName=!1,this.$app.auth=e.admin?1:2,this.$app.name=e.name,this.$app.phase="List",function(t){const e={};for(const n in a())e[n]=t[n];if("undefined"!=typeof localStorage)try{const t={version:i,settings:e};localStorage.setItem(s,JSON.stringify(t))}catch(t){console.warn("An error was encounted when stringifying settings."),console.warn(t)}}(this.$app)):this.inputName=!0}}}),w=(n(94),Object(r.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.inputName?[n("h3",{staticClass:"tac"},[t._v("初次登录请输入用户名")]),t._v(" "),n("div",{staticClass:"setting-container"},[n("span",[t._v("用户名：")]),t._v(" "),n("Input",{attrs:{placeholder:"请输入用户名",size:1.1},on:{enter:t.login},model:{value:t.$app.name,callback:function(e){t.$set(t.$app,"name",e)},expression:"$app.name"}})],1)]:n("div",{staticClass:"setting-container"},[n("span",[t._v("邀请码：")]),t._v(" "),n("Input",{attrs:{placeholder:"请输入邀请码",size:1.1},on:{enter:t.login},model:{value:t.$app.code,callback:function(e){t.$set(t.$app,"code",e)},expression:"$app.code"}})],1),t._v(" "),n("div",{staticClass:"button-container"},[n("Button",{attrs:{disabled:t.isInvalid||t.loading},on:{click:t.login}},[t.loading?t.inputName?[n("i",{staticClass:"icon-loading"}),t._v("正在设置用户名"),n("i",{staticClass:"icon-loading"})]:[n("i",{staticClass:"icon-loading"}),t._v("正在登录"),n("i",{staticClass:"icon-loading"})]:[t._v("登录")]],2)],1)],2)}),[],!1,null,"1855900e",null).exports);var C={components:{Button:c},inject:["$app"],data:()=>({loading:!1}),mounted(){this.refresh()},methods:{async refresh(){this.loading=!0;const t=await fetch(this.UZKK_GIFT_EXCHANGE_SERVER),e=(await t.json()).map(decodeURIComponent);this.loading=!1,this.$app.list=e},shuffle(){this.$app.list=function(t){t=t.slice();for(let e=0;e<t.length;e++){const n=Math.floor(Math.random()*t.length);[t[e],t[n]]=[t[n],t[e]]}return t}(this.$app.list)}}},k=(n(95),{components:{Login:w,List:Object(r.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition-group",{staticClass:"user-list",attrs:{name:"user-list",tag:"ul"}},t._l(t.$app.list,(function(e){return n("li",{key:e},[t._v("\n      "+t._s(e)+"\n    ")])})),0),t._v(" "),n("div",{staticClass:"button-container"},[1===t.$app.auth?[n("Button",{on:{click:t.shuffle}},[t._v("随机顺序")])]:t._e(),t._v(" "),n("Button",{attrs:{disabled:t.loading},on:{click:t.refresh}},[t.loading?[n("i",{staticClass:"icon-loading"}),t._v("正在获取列表"),n("i",{staticClass:"icon-loading"})]:[t._v("刷新列表")]],2),t._v(" "),n("Button",{on:{click:function(e){t.$app.phase="Login"}}},[t._v("返回登录页面")])],2)],1)}),[],!1,null,null,null).exports,FadeSlideTransition:n(14).a},data:()=>({...o(),phase:"Login",list:[]}),created(){this.auth&&(this.phase="List")},provide(){return{$app:this}}}),S=(n(96),Object(r.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("FadeSlideTransition",[e(this.phase,{key:this.phase,tag:"component"})],1)}),[],!1,null,null,null));e.default=S.exports}}]);